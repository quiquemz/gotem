<!DOCTYPE html>

<html lang="en">

  <head>
    <title>Gotem</title>

    <!--Imports Start-->
    <link rel="stylesheet" href="css/index.css">
    <link href="https://fonts.googleapis.com/css?family=Slackey" rel="stylesheet">
    <script src="http://code.iconify.design/1/1.0.0-rc3/iconify.min.js"></script>
    <!--Imports End-->

    <!--Firebase Start-->
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-storage.js"></script>
    <!--Firebase End-->

  </head>

  <body>

    <header>
      <h1>Library</h1>

      <div>
        <input name="searchMemesByName" id="search-memes-by-name" type="search" placeholder="Search for Meme">
      </div>
    </header>

    <main>
    <aside id="tags-container" >
      <h2>Tags</h2>
      <hr>
      <div class="tag">
        Random
      </div>
      <div class="tag">
        Funny
      </div>
      <div class="tag">
        Happy
      </div>
    </aside>

    <aside id="filters-container">
      <h2>Sort By</h2>
      <hr>
    </aside>

    <div class="grid">
      <div class="grid-sizer"></div>
    </div>

    <div class="grid">
      <div class="grid-sizer"></div>

    </div>

    </main>

    <footer>

      <a id="profile-btn" class="floating-btn" href="profile.html">
        <i class="iconify" data-icon="mdi:account"></i>
      </a>
      <a id="discover-btn" class="floating-btn" href="discover.html">
        <i class="iconify" data-icon="mdi:eye"></i>
      </a>
      <a id="create-btn" class="floating-btn" href="create.html">
        <i class="iconify" data-icon="mdi:pencil"></i>
      </a>
    </footer>

    <div id="templates">
      <template id="grid-item-template">
        <div class="grid-item">
          <div class="grid-item-overlay">
            <button onclick="deleteImg(this);">Delete</button>
            <button>Share</button>
            <button>Edit</button>
          </div>
          <img class="grid-item-image" src="img/default.jpg" alt="default">
        </div>
      </template>
    </div>

    <!--Javascript Start-->
    <script src="/js/firebase.js"></script>
    <script src="js/masonry.pkgd.min.js"></script>
    <script>
      // init Masonry
      var grid = document.querySelector('.grid');

      var msnry = new Masonry( grid, {
        itemSelector: '.grid-item',
        columnWidth: '.grid-sizer',
        percentPosition: true,
        gutter: 4,
        horizontalOrder: true
      });
    </script>
    <script src="/js/index.js"></script>
    <script>
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          uid = user.uid;
          displayname = user.displayName;
          email = user.email;
          anonymous = user.anonymous;
          user = user;
          console.log(user.toJSON());
          const db = firebase.firestore();
          // Initialize Cloud Firestore through Firebase
          // Disable deprecated features
          db.settings({
            timestampsInSnapshots: true
          });
          const us = firebase.storage();
          populate_DOM(user, db, us);
        }else{
          window.location.assign('/auth.html');
        }
      });
    </script>
    <!--Javascript End-->

  </body>

</html>
